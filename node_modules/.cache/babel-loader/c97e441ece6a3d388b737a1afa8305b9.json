{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"w-full md:w-auto absolute md:top-[40px] md:left-[60px] z-[2] flex gap-4 px-6 py-8 md:px-0 md:py-0 bg-transparent\"\n};\nconst _hoisted_2 = {\n  class: \"relative flex-1 md:min-w-[350px]\"\n};\nconst _hoisted_3 = {\n  class: \"absolute mt-[8px] w-full\"\n};\nconst _hoisted_4 = {\n  class: \"h-[200px] overflow-scroll bg-white rounded-md\"\n};\nconst _hoisted_5 = [\"onClick\"];\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-map-marker-alt\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  class: \"text-[12px]\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"mt-[8px] px-4 py-3 bg-white rounded-md\"\n};\nconst _hoisted_9 = {\n  class: \"text-lg\"\n};\nconst _hoisted_10 = {\n  class: \"text-xs mb-1\"\n};\nconst _hoisted_11 = {\n  class: \"text-xs\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_LoadingSpinner = _resolveComponent(\"LoadingSpinner\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Search \"), _createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Search Input \"), _createCommentVNode(\" <input\\n        class=\\\"pl-9 pr-4 py-3 text-[14px] focus:outline-none w-full shadow-md rounded-md\\\"\\n        type=\\\"text\\\"\\n        placeholder=\\\"Start your search...\\\"\\n        v-model=\\\"searchQuery\\\"\\n        @input=\\\"search\\\"\\n        @focus=\\\"$emit('toggleSearchResults')\\\"\\n      /> \"), _createCommentVNode(\" Search Icon \"), _createCommentVNode(\" <div class=\\\"absolute top-0 left-[8px] h-full flex items-center\\\">\\n        <i class=\\\"fas fa-search\\\"></i>\\n      </div> \"), _createCommentVNode(\" Search Results \"), _createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" Search Queries \"), _createElementVNode(\"div\", _hoisted_4, [_createCommentVNode(\" Loading Spinner \"), !$setup.searchData ? (_openBlock(), _createBlock(_component_LoadingSpinner, {\n    key: 0\n  })) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Display Results \"), _createElementVNode(\"div\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.searchData, (result, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"px-4 py-2 flex gap-x-2 cursor-pointer hover:bg-slate-600 hover:text-white\",\n      key: index,\n      onClick: $event => $setup.selectResult(result)\n    }, [_hoisted_6, _createElementVNode(\"p\", _hoisted_7, _toDisplayString(result.place_name_en), 1\n    /* TEXT */\n    )], 8\n    /* PROPS */\n    , _hoisted_5);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])], 2112\n  /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */\n  ))]), _createCommentVNode(\" Selected Search Result \"), $setup.selectedResult ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"i\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.removeResult && $setup.removeResult(...args)),\n    class: \"flex justify-end far fa-times-circle\"\n  }), _createElementVNode(\"h1\", _hoisted_9, _toDisplayString($setup.selectedResult.text), 1\n  /* TEXT */\n  ), _createElementVNode(\"p\", _hoisted_10, _toDisplayString($setup.selectedResult.properties.address) + \", \" + _toDisplayString($setup.selectedResult.city) + \", \" + _toDisplayString($setup.selectedResult.state), 1\n  /* TEXT */\n  ), _createElementVNode(\"p\", _hoisted_11, _toDisplayString($setup.selectedResult.properties.category), 1\n  /* TEXT */\n  )])) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" Geolocation \"), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"px-4 bg-white flex items-center shadow-md rounded-md min-h-[45px]\", {\n      'bg-slate-600': $props.coords\n    }]),\n    onClick: _cache[1] || (_cache[1] = $event => _ctx.$emit('getGeolocation'))\n  }, [_createElementVNode(\"i\", {\n    class: _normalizeClass([\"fas fa-location-arrow 'text-slate-600' text-[18px]\", {\n      'text-white': $props.coords,\n      'animate-pulse': $props.fetchCoords\n    }])\n  }, null, 2\n  /* CLASS */\n  )], 2\n  /* CLASS */\n  )]);\n}","map":{"version":3,"sources":["/Users/muhammad/Ayaz/express-vue3-tailwind-map/client/src/components/MapFeatures.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div\n    class=\"w-full md:w-auto absolute md:top-[40px] md:left-[60px] z-[2] flex gap-4 px-6 py-8 md:px-0 md:py-0 bg-transparent\"\n  >\n    <!-- Search -->\n    <div class=\"relative flex-1 md:min-w-[350px]\">\n      <!-- Search Input -->\n      <!-- <input\n        class=\"pl-9 pr-4 py-3 text-[14px] focus:outline-none w-full shadow-md rounded-md\"\n        type=\"text\"\n        placeholder=\"Start your search...\"\n        v-model=\"searchQuery\"\n        @input=\"search\"\n        @focus=\"$emit('toggleSearchResults')\"\n      /> -->\n      <!-- Search Icon -->\n      <!-- <div class=\"absolute top-0 left-[8px] h-full flex items-center\">\n        <i class=\"fas fa-search\"></i>\n      </div> -->\n      <!-- Search Results -->\n      <div class=\"absolute mt-[8px] w-full\">\n        <!-- Search Queries -->\n        <div\n          class=\"h-[200px] overflow-scroll bg-white rounded-md\"\n        >\n          <!-- Loading Spinner -->\n          <LoadingSpinner v-if=\"!searchData\" />\n          <!-- Display Results -->\n          <div v-else>\n            <div\n              class=\"px-4 py-2 flex gap-x-2 cursor-pointer hover:bg-slate-600 hover:text-white\"\n              v-for=\"(result, index) in searchData\"\n              :key=\"index\"\n              @click=\"selectResult(result)\"\n            >\n              <i class=\"fas fa-map-marker-alt\"></i>\n              <p class=\"text-[12px]\">{{ result.place_name_en }}</p>\n            </div>\n          </div>\n        </div>\n        <!-- Selected Search Result -->\n        <div v-if=\"selectedResult\" class=\"mt-[8px] px-4 py-3 bg-white rounded-md\">\n          <i @click=\"removeResult\" class=\"flex justify-end far fa-times-circle\"></i>\n          <h1 class=\"text-lg\">{{ selectedResult.text }}</h1>\n          <p class=\"text-xs mb-1\">\n            {{ selectedResult.properties.address }}, {{ selectedResult.city }},\n            {{ selectedResult.state }}\n          </p>\n          <p class=\"text-xs\">{{ selectedResult.properties.category }}</p>\n        </div>\n      </div>\n    </div>\n    <!-- Geolocation -->\n    <div\n      class=\"px-4 bg-white flex items-center shadow-md rounded-md min-h-[45px]\"\n      @click=\"$emit('getGeolocation')\"\n      :class=\"{ 'bg-slate-600': coords }\"\n    >\n      <i\n        class=\"fas fa-location-arrow 'text-slate-600' text-[18px]\"\n        :class=\"{ 'text-white': coords, 'animate-pulse': fetchCoords }\"\n      ></i>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport LoadingSpinner from \"./LoadingSpinner.vue\";\nexport default {\n  props: [\"fetchCoords\", \"coords\", \"searchResults\"],\n  components: { LoadingSpinner },\n  setup(props, { emit }) {\n    const searchQuery = ref(null);\n    const searchData = ref(null);\n    const queryTimeout = ref(null);\n    const selectedResult = ref(null);\n\n    const search = () => {\n      clearTimeout(queryTimeout.value);\n\n      // reset data on a new search\n      searchData.value = null;\n      queryTimeout.value = setTimeout(async () => {\n        // Only make search, if there is value in query input\n        if (searchQuery.value !== \"\") {\n          const params = new URLSearchParams({\n            fuzzyMatch: true,\n            language: \"en\",\n            limit: 10,\n            proximity: props.coords ? `${props.coords.lng},${props.coords.lat}` : \"0,0\",\n          });\n          const data = await axios.get(`api/search/${searchQuery.value}?${params}`);\n          searchData.value = data.data.features;\n        }\n      }, 750);\n    };\n\n    const selectResult = (result) => {\n      selectedResult.value = result;\n      emit(\"plotResult\", result.geometry);\n    };\n\n    const removeResult = () => {\n      selectedResult.value = null;\n      emit(\"removeResult\");\n    };\n\n    return {\n      searchQuery,\n      search,\n      searchData,\n      selectResult,\n      selectedResult,\n      removeResult,\n    };\n  },\n};\n</script>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}