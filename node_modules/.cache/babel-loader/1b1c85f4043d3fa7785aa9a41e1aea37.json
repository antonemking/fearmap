{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"w-full md:w-auto absolute md:top-[40px] md:left-[60px] z-[2] flex gap-4 px-6 py-8 md:px-0 md:py-0 bg-transparent\"\n};\nconst _hoisted_2 = {\n  class: \"relative flex-1 md:min-w-[350px]\"\n};\nconst _hoisted_3 = {\n  class: \"absolute mt-[8px] w-full\"\n};\nconst _hoisted_4 = {\n  class: \"h-[200px] overflow-scroll bg-white rounded-md\"\n};\nconst _hoisted_5 = [\"onClick\"];\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-map-marker-alt\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  class: \"text-[12px]\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"mt-[8px] px-4 py-3 bg-white rounded-md\"\n};\nconst _hoisted_9 = {\n  class: \"text-lg\"\n};\nconst _hoisted_10 = {\n  class: \"text-xs mb-1\"\n};\nconst _hoisted_11 = {\n  class: \"text-xs\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Search \"), _createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Search Input \"), _createCommentVNode(\" <input\\n        class=\\\"pl-9 pr-4 py-3 text-[14px] focus:outline-none w-full shadow-md rounded-md\\\"\\n        type=\\\"text\\\"\\n        placeholder=\\\"Start your search...\\\"\\n        v-model=\\\"searchQuery\\\"\\n        @input=\\\"search\\\"\\n        @focus=\\\"$emit('toggleSearchResults')\\\"\\n      /> \"), _createCommentVNode(\" Search Icon \"), _createCommentVNode(\" <div class=\\\"absolute top-0 left-[8px] h-full flex items-center\\\">\\n        <i class=\\\"fas fa-search\\\"></i>\\n      </div> \"), _createCommentVNode(\" Search Results \"), _createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" Search Queries \"), _createElementVNode(\"div\", _hoisted_4, [_createCommentVNode(\" Display Results \"), _createElementVNode(\"div\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.searchData, (result, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"px-4 py-2 flex gap-x-2 cursor-pointer hover:bg-slate-600 hover:text-white\",\n      key: index,\n      onClick: $event => $setup.selectResult(result)\n    }, [_hoisted_6, _createElementVNode(\"p\", _hoisted_7, _toDisplayString(result.place_name_en), 1\n    /* TEXT */\n    )], 8\n    /* PROPS */\n    , _hoisted_5);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])]), _createCommentVNode(\" Selected Search Result \"), $setup.selectedResult ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"i\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.removeResult && $setup.removeResult(...args)),\n    class: \"flex justify-end far fa-times-circle\"\n  }), _createElementVNode(\"h1\", _hoisted_9, _toDisplayString($setup.selectedResult.text), 1\n  /* TEXT */\n  ), _createElementVNode(\"p\", _hoisted_10, _toDisplayString($setup.selectedResult.properties.address) + \", \" + _toDisplayString($setup.selectedResult.city) + \", \" + _toDisplayString($setup.selectedResult.state), 1\n  /* TEXT */\n  ), _createElementVNode(\"p\", _hoisted_11, _toDisplayString($setup.selectedResult.properties.category), 1\n  /* TEXT */\n  )])) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" Geolocation \")]);\n}","map":{"version":3,"sources":["/Users/muhammad/Ayaz/express-vue3-tailwind-map/client/src/components/MapFeatures.vue"],"names":[],"mappings":";;AAEI,EAAA,KAAK,EAAC;;;AAGD,EAAA,KAAK,EAAC;;;AAeJ,EAAA,KAAK,EAAC;;;AAGP,EAAA,KAAK,EAAC;;;;gCAUF,mBAAA,CAAqC,GAArC,EAAqC;AAAlC,EAAA,KAAK,EAAC;AAA4B,CAArC,EAAgC,IAAhC,EAAgC,CAAA;AAAA;AAAhC,C;;;AACG,EAAA,KAAK,EAAC;;;;AAKY,EAAA,KAAK,EAAC;;;AAE3B,EAAA,KAAK,EAAC;;;AACP,EAAA,KAAK,EAAC;;;AAIN,EAAA,KAAK,EAAC;;;uBA7CjB,mBAAA,CAkDM,KAlDN,EAAA,UAAA,EAkDM,CA/CJ,mBAAA,CAAA,UAAA,CA+CI,EA9CJ,mBAAA,CA4CM,KA5CN,EAAA,UAAA,EA4CM,CA3CJ,mBAAA,CAAA,gBAAA,CA2CI,EA1CJ,mBAAA,CAAA,mSAAA,CA0CI,EAlCJ,mBAAA,CAAA,eAAA,CAkCI,EAjCJ,mBAAA,CAAA,6HAAA,CAiCI,EA9BJ,mBAAA,CAAA,kBAAA,CA8BI,EA7BJ,mBAAA,CA4BM,KA5BN,EAAA,UAAA,EA4BM,CA3BJ,mBAAA,CAAA,kBAAA,CA2BI,EA1BJ,mBAAA,CAeM,KAfN,EAAA,UAAA,EAeM,CAZJ,mBAAA,CAAA,mBAAA,CAYI,EAXJ,mBAAA,CAUM,KAVN,EAUM,IAVN,EAUM,E,kBATJ,mBAAA,CAQM,SARN,EAQM,IARN,EAQM,WAAA,CANsB,MAAA,CAAA,UAMtB,EANgC,CAA5B,MAA4B,EAApB,KAAoB,KAAf;yBAFvB,mBAAA,CAQM,KARN,EAQM;AAPJ,MAAA,KAAK,EAAC,2EAOF;AALH,MAAA,GAAG,EAAE,KAKF;AAJH,MAAA,OAAK,EAAA,MAAA,IAAE,MAAA,CAAA,YAAA,CAAa,MAAb;AAIJ,KARN,E,CAME,U,EACA,mBAAA,CAAqD,GAArD,EAAA,UAAA,EAAqD,gBAAA,CAA3B,MAAM,CAAC,aAAoB,CAArD,EAA8C;AAAA;AAA9C,K,CAPF,E;;AAAA,M,UAAA,C;GAQM,CARN,E;;AAAA,GASI,EAVN,CAWI,CAfN,CA0BI,EAVJ,mBAAA,CAAA,0BAAA,CAUI,EATO,MAAA,CAAA,c,kBAAX,mBAAA,CAQM,KARN,EAAA,UAAA,EAQM,CAPJ,mBAAA,CAA0E,GAA1E,EAA0E;AAAtE,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,CAAA,GAAA,IAAA,KAAE,MAAA,CAAA,YAAA,IAAA,MAAA,CAAA,YAAA,CAAA,GAAA,IAAA,CAAF,CAAiE;AAAjD,IAAA,KAAK,EAAC;AAA2C,GAA1E,CAOI,EANJ,mBAAA,CAAkD,IAAlD,EAAA,UAAA,EAAkD,gBAAA,CAA3B,MAAA,CAAA,cAAA,CAAe,IAAY,CAAlD,EAA0C;AAAA;AAA1C,GAMI,EALJ,mBAAA,CAGI,GAHJ,EAAA,WAAA,EAGI,gBAAA,CAFC,MAAA,CAAA,cAAA,CAAe,UAAf,CAA0B,OAE3B,CAAA,GAFqC,IAErC,GAFuC,gBAAA,CAAG,MAAA,CAAA,cAAA,CAAe,IAAlB,CAEvC,GAFgE,IAEhE,GADF,gBAAA,CAAG,MAAA,CAAA,cAAA,CAAe,KAAlB,CAFF,EAEyB;AAAA;AAFzB,GAKI,EADJ,mBAAA,CAA+D,GAA/D,EAAA,WAAA,EAA+D,gBAAA,CAAzC,MAAA,CAAA,cAAA,CAAe,UAAf,CAA0B,QAAe,CAA/D,EAAwD;AAAA;AAAxD,GACI,CARN,C,qCASI,CA5BN,CA6BI,CA5CN,CA8CI,EADJ,mBAAA,CAAA,eAAA,CACI,CAlDN,C","sourcesContent":["<template>\n  <div\n    class=\"w-full md:w-auto absolute md:top-[40px] md:left-[60px] z-[2] flex gap-4 px-6 py-8 md:px-0 md:py-0 bg-transparent\"\n  >\n    <!-- Search -->\n    <div class=\"relative flex-1 md:min-w-[350px]\">\n      <!-- Search Input -->\n      <!-- <input\n        class=\"pl-9 pr-4 py-3 text-[14px] focus:outline-none w-full shadow-md rounded-md\"\n        type=\"text\"\n        placeholder=\"Start your search...\"\n        v-model=\"searchQuery\"\n        @input=\"search\"\n        @focus=\"$emit('toggleSearchResults')\"\n      /> -->\n      <!-- Search Icon -->\n      <!-- <div class=\"absolute top-0 left-[8px] h-full flex items-center\">\n        <i class=\"fas fa-search\"></i>\n      </div> -->\n      <!-- Search Results -->\n      <div class=\"absolute mt-[8px] w-full\">\n        <!-- Search Queries -->\n        <div\n          class=\"h-[200px] overflow-scroll bg-white rounded-md\"\n        >\n          <!-- Display Results -->\n          <div>\n            <div\n              class=\"px-4 py-2 flex gap-x-2 cursor-pointer hover:bg-slate-600 hover:text-white\"\n              v-for=\"(result, index) in searchData\"\n              :key=\"index\"\n              @click=\"selectResult(result)\"\n            >\n              <i class=\"fas fa-map-marker-alt\"></i>\n              <p class=\"text-[12px]\">{{ result.place_name_en }}</p>\n            </div>\n          </div>\n        </div>\n        <!-- Selected Search Result -->\n        <div v-if=\"selectedResult\" class=\"mt-[8px] px-4 py-3 bg-white rounded-md\">\n          <i @click=\"removeResult\" class=\"flex justify-end far fa-times-circle\"></i>\n          <h1 class=\"text-lg\">{{ selectedResult.text }}</h1>\n          <p class=\"text-xs mb-1\">\n            {{ selectedResult.properties.address }}, {{ selectedResult.city }},\n            {{ selectedResult.state }}\n          </p>\n          <p class=\"text-xs\">{{ selectedResult.properties.category }}</p>\n        </div>\n      </div>\n    </div>\n    <!-- Geolocation -->\n  </div>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nexport default {\n  props: [\"fetchCoords\", \"coords\", \"searchResults\"],\n  setup(props, { emit }) {\n    const searchQuery = ref(null);\n    const searchData = ref(null);\n    const queryTimeout = ref(null);\n    const selectedResult = ref(null);\n\n    const search = () => {\n      clearTimeout(queryTimeout.value);\n\n      // reset data on a new search\n      searchData.value = null;\n      queryTimeout.value = setTimeout(async () => {\n        // Only make search, if there is value in query input\n        if (searchQuery.value !== \"\") {\n          const params = new URLSearchParams({\n            fuzzyMatch: true,\n            language: \"en\",\n            limit: 10,\n            proximity: props.coords ? `${props.coords.lng},${props.coords.lat}` : \"0,0\",\n          });\n          const data = await axios.get(`api/search/${searchQuery.value}?${params}`);\n          searchData.value = data.data.features;\n        }\n      }, 750);\n    };\n\n    const selectResult = (result) => {\n      selectedResult.value = result;\n      emit(\"plotResult\", result.geometry);\n    };\n\n    const removeResult = () => {\n      selectedResult.value = null;\n      emit(\"removeResult\");\n    };\n\n    return {\n      searchQuery,\n      search,\n      searchData,\n      selectResult,\n      selectedResult,\n      removeResult,\n    };\n  },\n};\n</script>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}