{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"map-container\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"mapContainer\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_3 = {\n  class: \"locations\"\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"text-[14px]\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.locations, (location, ind) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: ind,\n      onClick: $event => $options.addMarker(location),\n      class: \"location\"\n    }, [_createElementVNode(\"img\", {\n      src: location.img,\n      alt: \"img\",\n      class: \"w-[100%] h-[150px] object-cover\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_5), _createElementVNode(\"h2\", _hoisted_6, _toDisplayString(location.name), 1\n    /* TEXT */\n    ), _createElementVNode(\"span\", null, _toDisplayString(location.date), 1\n    /* TEXT */\n    )], 8\n    /* PROPS */\n    , _hoisted_4);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])]);\n}","map":{"version":3,"sources":["/Users/muhammad/Ayaz/express-vue3-tailwind-map/client/src/views/HomeView.vue"],"names":[],"mappings":";;AACO,EAAA,KAAK,EAAC;;;gCACT,mBAAA,CAAyB,KAAzB,EAAyB;AAApB,EAAA,EAAE,EAAC;AAAiB,CAAzB,EAAsB,IAAtB,EAAsB,CAAA;AAAA;AAAtB,C;;;AACK,EAAA,KAAK,EAAC;;;;;AAQH,EAAA,KAAK,EAAC;;;uBAVhB,mBAAA,CAcM,KAdN,EAAA,UAAA,EAcM,CAbJ,UAaI,EAZJ,mBAAA,CAWM,KAXN,EAAA,UAAA,EAWM,E,kBAVJ,mBAAA,CASM,SATN,EASM,IATN,EASM,WAAA,CARsB,KAAA,CAAA,SAQtB,EAR+B,CAA3B,QAA2B,EAAjB,GAAiB,KAAd;yBADvB,mBAAA,CASM,KATN,EASM;AAPH,MAAA,GAAG,EAAE,GAOF;AANH,MAAA,OAAK,EAAA,MAAA,IAAE,QAAA,CAAA,SAAA,CAAU,QAAV,CAMJ;AALJ,MAAA,KAAK,EAAC;AAKF,KATN,E,CAME,mBAAA,CAA4E,KAA5E,EAA4E;AAAtE,MAAA,GAAG,EAAE,QAAQ,CAAC,GAAwD;AAAnD,MAAA,GAAG,EAAC,KAA+C;AAAzC,MAAA,KAAK,EAAC;AAAmC,KAA5E,E,IAAA,E;;AAAA,M,UAAA,C,EACA,mBAAA,CAAgD,IAAhD,EAAA,UAAA,EAAgD,gBAAA,CAArB,QAAQ,CAAC,IAAY,CAAhD,EAAwC;AAAA;AAAxC,K,EACA,mBAAA,CAAgC,MAAhC,EAAgC,IAAhC,EAAgC,gBAAA,CAAvB,QAAQ,CAAC,IAAc,CAAhC,EAAsB;AAAA;AAAtB,K,CARF,E;;AAAA,M,UAAA,C;GASM,CATN,E;;AAAA,GAUI,EAXN,CAYI,CAdN,C","sourcesContent":["<template>\n  <div class=\"map-container\">\n    <div id=\"mapContainer\" />\n    <div class=\"locations\" >\n      <div\n        v-for=\"(location, ind) in locations\"\n        :key=\"ind\"\n        @click=\"addMarker(location)\"\n        class=\"location\" \n      >\n        <img :src=\"location.img\" alt=\"img\" class=\" w-[100%] h-[150px] object-cover\">\n        <h2 class=\"text-[14px]\">{{ location.name }}</h2>\n        <span>{{ location.date }}</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport mapboxgl from \"mapbox-gl\";\nexport default {\n  name: \"HomeView\",\n  data() {\n    return {\n      map: null,\n      locations: [\n        {\n          name: \"Brushy Mountain State Penitentiary\",\n          date: \"2019-10-26\",\n          img : require(\"../assets/thumbnail.jpeg\"),\n          coordinates: {\n            latitude: 36.1052,\n            longitude: -84.4529,\n          },\n        },\n\n        {\n          name: \"Old South Pittsburg Hospital\",\n          date: \"2019-11-02\",\n          img : require(\"../assets/thumbnail.jpeg\"),\n          coordinates: {\n            latitude: 35.0021,\n            longitude: -85.7147,\n          },\n        },\n      ],\n      accessToken: `${process.env.VUE_APP_API_KEY}`,\n      currentMarkers: [],\n    };\n  },\n  mounted() {\n    mapboxgl.accessToken = this.accessToken;\n    this.map = new mapboxgl.Map({\n      container: \"mapContainer\",\n      style: \"mapbox://styles/mapbox/streets-v11\",\n      center: [103.811279, 1.345399],\n      zoom: 12,\n    });\n  },\n  methods: {\n    addMarker(location) {\n      this.removeOldMarkers();\n      const { longitude, latitude } = location.coordinates;\n      const marker = new mapboxgl.Marker()\n        .setLngLat([longitude, latitude])\n        .addTo(this.map);\n        this.currentMarkers.push(marker);\n      this.map.setCenter([longitude, latitude]);\n      this.addPopup(location, marker);\n    },\n\n    removeOldMarkers(){\n      if (this.currentMarkers!==null) {\n        for (var i = this.currentMarkers.length - 1; i >= 0; i--) {\n          this.currentMarkers[i].remove();\n        }\n      }\n    },\n    // for marker popup\n    addPopup(location, marker) {\n      const markerDiv = marker.getElement();\n      var popup = new mapboxgl.Popup({ offset: [0, -35] }).setHTML(\n        `<div>\n          <img src=\"${location.img}\" alt=\"img\" class=\"popup-img\">\n          <p>${location.name}</p>\n        </div>`\n      );\n      // hover event listener\n      markerDiv.addEventListener(\"mouseenter\", () => popup.addTo(this.map));\n      // markerDiv.addEventListener('mouseleave', () => popup.remove());\n\n      // add popup to marker\n      marker.setPopup(popup);\n      // add marker to map\n      marker.addTo(this.map);\n    },\n  },\n};\n</script>\n\n<style>\n.map-container{\n  display: grid;\n  grid-template-columns: 75% 25%;\n  height: 100vh;\n}\n.locations{\n  height: 100%;\n  overflow-y: auto;\n}\n.location{\n  border-bottom: 1px solid #ccc;\n  padding: 10px;\n  cursor: pointer;\n}\n.popup-img{\n   width: 100%;\n   height: 100px;\n   object-fit: cover;\n   border-top-left-radius: 10px;\n   border-top-right-radius: 10px;\n}\n.mapboxgl-popup-content{\n  min-width: 250px;\n  padding: 0px;\n  box-shadow: 0 1px 2px rgb(60 64 67 / 30%), 0 2px 6px 2px rgb(60 64 67 / 15%);\n  border-radius: 10px;\n}\n.mapboxgl-popup-close-button {\n  display: none !important;\n}\n</style>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}